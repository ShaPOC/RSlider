/* *
 * Ricardoismy.name
 * 
 * @author Ricardo Snoek
 * @copyright Copyright (c) 2011-2012, Ricardoismy.name (http://www.ricardoismy.name)
 *
 * Jquery, JqueryUI is required for this error handler to work!
 * The Jquery, JqueryUI library needs to be included before this file!
 * 
 */

(function(e,t,n,r){var i=navigator.userAgent.match(/Android|webOS|IEMobile|iPhone|iPad|iPod|BlackBerry|Windows Phone|ZuneWP7/i);var s=new Array;var o=new Array;var u=new Array;var a=new Number;var f=new Number;var l=new Object;var c=new Object;var h=e(n);var p=e(t);var d={init:function(t,n){var r=this;r.options=e.extend({},e.fn.rslider.defaultOptions,n);if(r.options.slider.animation&&r.options.title.animation)d.animations(r.options);if(r.options.timing!==0)d.timer(r.options);for(var a=0;a<r.options.slides.length;a++){if(r.options.slides[a].type==="video"&&(!i||screen.width>800)){s.push(d.video(t,r.options.slides[a],r.options));if(r.options.slides[a].title)o.push(d.title(t,r.options.slides[a],r.options))}else if(r.options.slides[a].type==="image"){s.push(d.image(t,r.options.slides[a],r.options));if(r.options.slides[a].title)o.push(d.title(t,r.options.slides[a],r.options))}}if(s.length!==0)d.create(t,r.options);if(u.length!==0)d.center(r.options);p.on("resize",function(){d.center(r.options,true)})},create:function(e,t){for(var n=0;n<s.length;n++){s[n].prependTo(e);if(typeof o[n]==="object")o[n].appendTo(s[n])}},center:function(t,n){for(var r=0;r<u.length;r++){var i=e(u[r]);if(i.is("video")&&!n)i.on("play",s);else i.load(s);function s(){if(i.innerWidth()>p.innerWidth())i.css({marginLeft:Math.floor((p.innerWidth()-i.outerWidth())/2)});if(i.innerHeight()>p.innerHeight())i.css({marginTop:Math.floor((p.innerHeight()-i.innerHeight())/2)})}}},animations:function(e){switch(e.slider.animation){case"slide-up":l=v.slider.slideup;break;case"slide-down":l=v.slider.slidedown;break;case"slide-left":l=v.slider.slideleft;break;case"slide-right":l=v.slider.slideright;break;case"fade":l=v.slider.fade;break}switch(e.title.animation){case"slide-up":c=v.title.slideup;break;case"slide-down":c=v.title.slidedown;break;case"slide-left":c=v.title.slideleft;break;case"fade":c=v.title.fade;break}},play:function(e){l.current(s[f],e,function(e){if(o.length>1)c.current(o[f],e);d.callback(e);l.next(s[f],e,function(e){if(o.length>1)c.next(o[f],e)})})},callback:function(e){if(f+1<=s.length-1&&e.repeat)f=f+1;else if(f>=s.length-1&&e.repeat)f=new Number;else if(!e.repeat)a=t.clearInterval(a);if(s[f].children("video").is("video"))s[f].children("video")[0].play();if(s[f].children("video").data("videotimer"))d.videotimer(s[f].children("video"),e)},timer:function(e){a=t.setInterval(function(){d.play(e)},e.timing)},title:function(t,n,r){var i=e(n.title);if(o.length>=1)c.current(i,r);return i},image:function(t,r,i){var s=e(n.createElement("img"));s.addClass(i.classes.image);s.attr("src",r.url);var o=e(n.createElement("div"));o.addClass(i.classes.content);o.append(s);if(r.center)u.push(s);return o},video:function(t,r,i){var s=e(n.createElement("video"));s.addClass(i.classes.video);s.prop("autoplay",r.autoplay);s.attr("poster",r.poster);var o=e(n.createElement("div"));o.addClass(i.classes.content);o.append(s);for(var a=0;a<i.video.length;a++){var f=e(n.createElement("source"));f.attr("src",r.url.replace(r.url.split(".")[1],"")+i.video[a]);f.attr("type","video/"+i.video[a]);f.appendTo(s)}if(r.center)u.push(s);if(r.videotimer)d.videotimer(s,i);return o},videotimer:function(e,n){a=t.clearInterval(a);if(e.is("video")){e.data("videotimer",true);e.unbind("ended").bind("ended",function(){d.play(n);d.timer(n)})}}};var v={slider:{slideup:{current:function(e,t,n){e.animate({top:"-100%"},t.slider.speed,t.slider.easing);if(typeof n==="function")n(t)},next:function(e,t,n){e.css({top:"100%"}).animate({top:"0%"},t.slider.speed,t.slider.easing,function(){if(typeof n==="function")n(t)})}},slidedown:{current:function(e,t,n){e.animate({bottom:"-100%"},t.slider.speed,t.slider.easing);if(typeof n==="function")n(t)},next:function(e,t,n){e.css({bottom:"100%"}).animate({bottom:"0%"},t.slider.speed,t.slider.easing,function(){if(typeof n==="function")n(t)})}},slideleft:{current:function(e,t,n){e.animate({left:"-100%"},t.slider.speed,t.slider.easing);if(typeof n==="function")n(t)},next:function(e,t,n){e.css({left:"100%"}).animate({left:"0%"},t.slider.speed,t.slider.easing,function(){if(typeof n==="function")n(t)})}},slideright:{current:function(e,t,n){e.animate({right:"-100%"},t.slider.speed,t.slider.easing);if(typeof n==="function")n(t)},next:function(e,t,n){e.css({right:"100%"}).animate({right:"0%"},t.slider.speed,t.slider.easing,function(){if(typeof n==="function")n(t)})}},fade:{current:function(e,t,n){e.fadeOut(t.slider.speed);if(typeof n==="function")n(t)},next:function(e,t,n){e.fadeIn(t.slider.speed,function(){if(typeof n==="function")n(t)})}}},title:{slideup:{current:function(t,n,r){t.children().each(function(t){e(this).fadeOut(n.title.speed,function(){e(this).css({marginTop:"-115%"})})})},next:function(t,n,r){t.children().each(function(t){var r=e(this);setTimeout(function(){r.fadeIn(n.title.speed);r.animate({marginTop:"0%"},n.title.speed,n.title.easing)},t*n.title.speed)});if(typeof r==="function")r(n)}},slidedown:{current:function(t,n,r){t.children().each(function(t){e(this).fadeOut(n.title.speed,function(){e(this).css({marginBottom:"115%"})})})},next:function(t,n,r){t.children().each(function(t){var r=e(this);setTimeout(function(){r.fadeIn(n.title.speed);r.animate({marginBottom:"0%"},n.title.speed,n.title.easing)},t*n.title.speed)});if(typeof r==="function")r(n)}},slideleft:{current:function(t,n,r){t.children().each(function(t){e(this).fadeOut(n.title.speed,function(){e(this).css({marginLeft:"-115%"})})})},next:function(t,n,r){t.children().each(function(t){var r=e(this);setTimeout(function(){r.fadeIn(n.title.speed);r.animate({marginLeft:"0%"},n.title.speed,n.title.easing)},t*n.title.speed)});if(typeof r==="function")r(n)}},fade:{current:function(t,n,r){t.children().each(function(t){e(this).fadeOut(n.title.speed)})},next:function(t,n,r){t.children().each(function(t){var r=e(this);setTimeout(function(){r.fadeIn(n.title.speed)},t*n.title.speed)});if(typeof r==="function")r(n)}}}};e.fn.rslider=function(t,n){return this.each(function(){d.init(e(this),t)})};e.fn.rslider.defaultOptions={classes:{holder:"slider-container",content:"slider-content",video:"slider-video",image:"slider-image",title:"slider-title"},slider:{animation:"slide-up",easing:"easeInOutExpo",speed:2e3},title:{animation:"slide-left",easing:"easeInOutExpo",speed:300},timing:12e3,repeat:true,slides:[],video:["mp4","webm","ogv"]}})(jQuery,window,document)